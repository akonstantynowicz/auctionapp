(function(e){function t(t){for(var i,r,o=t[0],c=t[1],u=t[2],d=0,m=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&m.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(t);while(m.length)m.shift()();return n.push.apply(n,u||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],i=!0,o=1;o<s.length;o++){var c=s[o];0!==a[c]&&(i=!1)}i&&(n.splice(t--,1),e=r(r.s=s[0]))}return e}var i={},a={app:0},n=[];function r(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=i,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;n.push(["9be5","chunk-vendors"]),s()})({0:function(e,t){},"07c0":function(e,t,s){"use strict";var i=s("223c"),a=s.n(i);a.a},"0957":function(e,t,s){},"0bc7":function(e,t,s){},"0c06":function(e,t,s){e.exports=s.p+"img/kategorie1.8615f6ec.png"},"0f05":function(e,t,s){"use strict";var i=s("bef8"),a=s.n(i);a.a},"12e1":function(e,t,s){e.exports=s.p+"img/logoT.ff960c53.png"},1612:function(e,t,s){"use strict";var i=s("a7f6"),a=s.n(i);a.a},1841:function(e,t,s){},2176:function(e,t,s){e.exports=s.p+"img/envelopeEmpty.f02ebb86.png"},"223c":function(e,t,s){},2699:function(e,t,s){e.exports=s.p+"img/devices.9edb0ed5.png"},"278c":function(e,t,s){e.exports=s.p+"img/blueEnvelope.cf2b4d1d.png"},"2dc1":function(e,t,s){"use strict";var i=s("e559"),a=s.n(i);a.a},"33f0":function(e,t,s){},"36e5":function(e,t,s){"use strict";var i=s("71bb"),a=s.n(i);a.a},"3aa7":function(e,t,s){"use strict";var i=s("df78"),a=s.n(i);a.a},"3de9":function(e,t,s){},"47d8":function(e,t,s){e.exports=s.p+"img/agd.7ede4d7d.png"},"4aa8":function(e,t,s){},"4ce4":function(e,t,s){"use strict";var i=s("e7aa"),a=s.n(i);a.a},"4db6":function(e,t,s){"use strict";var i=s("ebc7"),a=s.n(i);a.a},"58ce":function(e,t,s){"use strict";var i=s("d60c"),a=s.n(i);a.a},"5cad":function(e,t,s){e.exports=s.p+"img/edit.114a0923.png"},"5d71":function(e,t,s){"use strict";var i=s("1841"),a=s.n(i);a.a},"6a33":function(e,t,s){"use strict";var i=s("bff4"),a=s.n(i);a.a},"6b67":function(e,t,s){e.exports=s.p+"img/furniture.19cbe2a4.png"},"6b70":function(e,t,s){var i={"./agd.png":"47d8","./blueEnvelope.png":"278c","./clothes.png":"b10b","./devices.png":"2699","./edit.png":"5cad","./envelopeEmpty.png":"2176","./envelopeFull.png":"cf6f","./furniture.png":"6b67","./garden.png":"c742","./kategorie1.png":"0c06","./logo.png":"c1bc","./logoNew.png":"eb89","./logoNew2.png":"e638","./logoNewer.png":"cd8e","./logoT.png":"12e1","./makeup.png":"d195","./newBg.png":"b4a7"};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id="6b70"},"6b99":function(e,t,s){},"6d17":function(e,t,s){"use strict";var i=s("70dd"),a=s.n(i);a.a},"6e77":function(e,t,s){},"707d":function(e,t,s){},"70dd":function(e,t,s){},"71bb":function(e,t,s){},"73ad":function(e,t,s){"use strict";var i=s("707d"),a=s.n(i);a.a},"8ba2":function(e,t,s){},9495:function(e,t,s){"use strict";var i=s("8ba2"),a=s.n(i);a.a},"9bcb":function(e,t,s){"use strict";var i=s("0bc7"),a=s.n(i);a.a},"9be5":function(e,t,s){"use strict";s.r(t);var i=s("2b0e"),a=s("8c4f"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("Header")],1)},r=[],o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"routerView"},[i("div",{staticClass:"header"},[i("div",{staticClass:"appLogo"},[i("router-link",{attrs:{to:"/"}},[i("img",{attrs:{alt:"App logo",src:s("cd8e")}})])],1),i("Navigation",{staticClass:"normal",attrs:{isAuthenticated:e.isAuthenticated,newMessage:e.newMessage,newOffer:e.newOffer},on:{seen:e.seen,logout:e.logout}}),i("div",{staticClass:"menu"},[i("button",{staticClass:"button",on:{click:e.dropDown}},[e._v("MENU v")]),e.showDropdown?i("div",{staticClass:"menuContent"},[i("Navigation",{attrs:{isAuthenticated:e.isAuthenticated,newMessage:e.newMessage,newOffer:e.newOffer},on:{logout:e.logout,seen:e.seen,hideMenu:e.hideMenu}})],1):e._e()])],1),i("router-view")],1)},c=[],u=s("8055"),l=s.n(u),d=s("bc3a"),m=s.n(d),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isAuthenticated?i("div",{staticClass:"buttons"},[e.newOffer?i("div",{on:{click:e.seen}},[i("router-link",{staticClass:"link",attrs:{to:"/panel"}},[e._v("PRZEBITY!")])],1):e._e(),i("router-link",{attrs:{to:"/chat"}},[e.newMessage?i("img",{attrs:{src:s("cf6f")},on:{click:e.hideDropdown}}):i("img",{attrs:{src:s("2176")},on:{click:e.hideDropdown}})]),i("div",{staticClass:"dropdown"},[i("button",{staticClass:"dropButton",on:{click:e.dropDown}},[e._v("AUKCJE v")]),e.showDropdown?i("div",{staticClass:"dropdownContent",on:{click:e.hideDropdown}},[i("router-link",{staticClass:"link",attrs:{to:"/addAuction"}},[e._v("DODAJ AUKCJĘ")]),i("router-link",{staticClass:"link",attrs:{to:"/myAuctions"}},[e._v("EDYTUJ AUKCJĘ")]),i("router-link",{staticClass:"link",attrs:{to:"/history"}},[e._v("MOJE AUKCJE")]),i("router-link",{staticClass:"link",attrs:{to:"/panel"}},[e._v("PANEL AUKCJOWANIA")])],1):e._e()]),i("router-link",{attrs:{to:"/account"}},[i("button",{on:{click:e.hideDropdown}},[e._v("MOJE KONTO")])]),i("button",{staticClass:"logout",on:{click:e.logout}},[e._v("WYLOGUJ SIĘ")])],1):i("div",{staticClass:"buttons"},[i("router-link",{attrs:{to:"/login"}},[i("button",{staticClass:"login",on:{click:e.hideMenu}},[e._v("LOGOWANIE")])]),i("router-link",{attrs:{to:"/register"}},[i("button",{staticClass:"register",on:{click:e.hideMenu}},[e._v("REJESTRACJA")])])],1)},h=[],v={name:"Navigation",props:["isAuthenticated","newMessage","newOffer"],data(){return{showDropdown:!1}},methods:{logout(){this.$emit("logout")},dropDown(){this.showDropdown=!this.showDropdown},hideDropdown(){this.showDropdown=!1,this.hideMenu()},hideMenu(){this.$emit("hideMenu")},seen(){this.$emit("seen")}}},g=v,f=(s("e403"),s("2877")),b=Object(f["a"])(g,p,h,!1,null,null,null),_=b.exports;const C="/api",w="/api/logout",A=window.location.host;var k={name:"Header",components:{Navigation:_},data(){return{isAuthenticated:null,user:null,error:null,showDropdown:!1,socket:null,newMessage:!1,newOffer:!1}},created(){m.a.get(C,{withCredentials:!0}).then(e=>{this.isAuthenticated=e.data.isAuthenticated,this.user=e.data.user,this.newMessage=e.data.newMessages,console.log(this.newMessage),this.isAuthenticated&&(this.socket=l()(A),console.log(this.socket),console.log(this.isAuthenticated),this.socket.emit("online",this.user.username),this.socket.username=this.user.username,this.socket.on("newMessage",e=>{console.log("newmessage!"),this.newMessage=!0}),this.socket.on("betterOffer",e=>{console.log("newoffer!"),this.newOffer=!0}),this.socket.on("noMessages",e=>{console.log("nomessages"),this.newMessage>0&&this.newMessage--}))}).catch(e=>{this.error=e.response.data.message})},updated(){m.a.get(C,{withCredentials:!0}).then(e=>{this.isAuthenticated=e.data.isAuthenticated,this.user=e.data.user,this.newMessage=e.data.newMessages,this.isAuthenticated&&!this.socket&&(this.socket=l()(A),this.socket.emit("online",this.user.username))}).then(()=>{this.isAuthenticated&&this.socket&&(this.socket.on("newMessage",e=>{console.log("newmessage!"),this.newMessage=!0}),this.socket.on("betterOffer",e=>{console.log("newoffer!"),this.newOffer=!0}),this.socket.on("noMessages",e=>{console.log("nomessages"),this.newMessage>0&&this.newMessage--}))}).catch(e=>{this.error=e.response.data.message})},methods:{logout(){m.a.get(w,{withCredentials:!0}).then(e=>{this.isAuthenticated=e.data.isAuthenticated,this.user=e.data.user,this.showDropdown=!1,console.log("logging out"),console.log(this.socket),this.socket&&(console.log("disconnecting client"),this.socket.disconnect()),this.$router.push("/")}).catch(e=>{this.error=e.response.data.message})},dropDown(){this.showDropdown=!this.showDropdown,console.log(this.showDropdown)},hideMenu(){this.showDropdown=!1},seen(){this.newOffer=!1}}},y=k,O=(s("4ce4"),Object(f["a"])(y,o,c,!1,null,null,null)),N=O.exports,E={name:"App",components:{Header:N}},T=E,x=(s("2dc1"),Object(f["a"])(T,n,r,!1,null,null,null)),D=x.exports,P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"loginGrid"},[s("div",{staticClass:"loginForm"},[s("h2",{staticClass:"title"},[e._v("L O G O W A N I E")]),e.error?s("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),s("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[s("div",{staticClass:"formDiv"},[s("label",{attrs:{for:"username"}},[e._v("Nazwa użytkownika")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-input",attrs:{type:"text",name:"username",id:"username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),s("div",{staticClass:"formDiv"},[s("label",{attrs:{for:"password"}},[e._v("Hasło")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-input",attrs:{type:"password",name:"password",id:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._m(0)])])])},I=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"formDiv"},[s("button",{attrs:{type:"submit"}},[e._v("ZALOGUJ SIĘ")])])}];const M="api/login";var U={name:"login",data(){return{username:"",password:"",error:""}},methods:{login(){m.a.post(M,{username:this.username,password:this.password},{withCredentials:!0}).then(e=>{this.$router.push("/")}).catch(e=>{this.error=e.response.data.message})}}},J=U,$=(s("6a33"),Object(f["a"])(J,P,I,!1,null,null,null)),Z=$.exports,S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"registerFlex"},[s("div",{staticClass:"registerForm"},[s("h2",{staticClass:"title"},[e._v("R E J E S T R A C J A")]),e.error?s("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),s("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[s("div",{staticClass:"formDiv"},[s("label",{attrs:{for:"email"}},[e._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-input",attrs:{type:"email",name:"email",id:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),s("div",{staticClass:"formDiv"},[s("label",{attrs:{for:"username"}},[e._v("Nazwa użytkownika")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-input",attrs:{type:"text",name:"username",id:"username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),s("div",{staticClass:"formDiv"},[s("label",{attrs:{for:"password"}},[e._v("Hasło")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-input",attrs:{type:"password",name:"password",id:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._m(0)])])])},j=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"formDiv"},[s("button",{attrs:{type:"submit"}},[e._v("ZAREJESTRUJ SIĘ")])])}];const z="api/register";var K={name:"login",data(){return{email:"",username:"",password:"",error:""}},methods:{register(){m.a.post(z,{email:this.email,username:this.username,password:this.password},{withCredentials:!0}).then(e=>{this.$router.push("/login")}).catch(e=>{this.error=e.response.data.message})}}},R=K,W=(s("4db6"),Object(f["a"])(R,S,j,!1,null,null,null)),Y=W.exports,L=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"page"},[s("Auctions")],1)])},F=[],H=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"auctions"},[s("h1",[e._v("A U K C J E")]),e.error?s("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),e._l(e.auctions,(function(e,t){return s("auction",{key:e._id,attrs:{auction:e,index:t}})})),s("infinite-loading",{attrs:{spinner:"waveDots"},on:{infinite:e.infiniteHandler}},[s("div",{attrs:{slot:"no-more"},slot:"no-more"},[e._v("Nie ma więcej aukcji")])])],2)},B=[],G=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("router-link",{staticClass:"router",attrs:{to:{name:"auction",params:{id:e.auction._id}}}},[i("div",{staticClass:"auction",on:{click:function(t){return e.selectAuction()}}},[i("p",{staticClass:"name"},[e._v(" "+e._s(e.auction.itemName))]),i("div",{staticClass:"picture"},[i("img",{attrs:{src:s("6b70")("./"+e.auction.picture),alt:"halo"}})]),i("p",{staticClass:"description"},[e._v(e._s(e.auction.description))]),i("p",{staticClass:"timeLeft"},[e._v(e._s(e.toEnding)+" dni do końca")]),i("p",{staticClass:"price"},[e._v(e._s(e.auction.price)+" zł")])])])},q=[],V={props:["auction"],data(){return{toEnding:null}},methods:{selectAuction(){this.$root.$emit("auctionSelected",this.server)}},created(){this.toEnding=Math.round((new Date(this.auction.endTime)-new Date(this.auction.beginTime))/864e5)}},Q=V,X=(s("6d17"),Object(f["a"])(Q,G,q,!1,null,null,null)),ee=X.exports;const te="/api/auctions/";var se={name:"AuctionsComponent",data(){return{page:0,auctions:[],error:""}},components:{Auction:ee},methods:{infiniteHandler(e){m.a.get(te,{params:{page:this.page}},{withCredentials:!0}).then(t=>{t.data.page>1?(0===this.page?(this.page=t.data.page,this.page=this.page-1):1===this.page?this.page=-1:this.page=this.page-1,this.auctions.push(...t.data.auctions),e.loaded()):(this.auctions.push(...t.data.auctions),e.complete())}).catch(e=>{this.error=e.response.data.message})}}},ie=se,ae=(s("bb18"),Object(f["a"])(ie,H,B,!1,null,"18d11f23",null)),ne=ae.exports,re={name:"App",components:{Auctions:ne}},oe=re,ce=(s("b260"),Object(f["a"])(oe,L,F,!1,null,null,null)),ue=ce.exports,le=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"accountData"},[e.isAuthenticated?i("div",{staticClass:"accountForm"},[e._m(0),e.error?i("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),i("div",{staticClass:"form"},[i("div",{staticClass:"formDiv"},[i("label",{attrs:{for:"email"}},[e._v("E M A I L")]),1===e.editEmail?i("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-input",attrs:{type:"email",name:"email",id:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}):i("p",{staticClass:"fieldName"},[e._v(e._s(e.user.email)),i("button",{on:{click:e.updateEmail}},[i("img",{staticClass:"editImg",attrs:{src:s("5cad")}})])])]),i("div",{staticClass:"formDiv"},[i("label",{attrs:{for:"username"}},[e._v("N A Z W A")]),1===e.editUsername?i("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-input",attrs:{type:"text",name:"username",id:"username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}):i("p",{staticClass:"fieldName"},[e._v(e._s(e.user.username)),i("button",{on:{click:e.updateUsername}},[i("img",{staticClass:"editImg",attrs:{src:s("5cad")}})])])]),i("div",{staticClass:"formDiv"},[i("label",{attrs:{for:"password"}},[e._v("H A S Ł O")]),1===e.editPassword?i("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-input",attrs:{type:"password",name:"password",id:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}):i("p",{staticClass:"fieldName"},[i("button",{on:{click:e.updatePassword}},[i("img",{staticClass:"editImg",attrs:{src:s("5cad")}})])])]),i("div",{staticClass:"formDiv"},[i("button",{on:{click:e.changeData}},[e._v("ZATWIERDŹ ZMIANY")])])])]):i("h2",{staticClass:"title"},[e._v("Z A L O G U J "),i("br"),e._v(" S I Ę ")])])},de=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h2",{staticClass:"title"},[e._v("M O J E"),s("br"),e._v("K O N T O")])}];const me="api/account";var pe={name:"account",data(){return{isAuthenticated:null,user:null,error:null,message:null,username:"",email:"",password:"",editEmail:0,editUsername:0,editPassword:0}},created(){m.a.get(me,{withCredentials:!0}).then(e=>{this.isAuthenticated=e.data.isAuthenticated,this.user=e.data.user,this.email=this.user.email,this.username=this.user.username}).catch(e=>{this.error=e.response.data.message})},methods:{changeData(){m.a.patch(me,{email:this.email,username:this.username,password:this.password},{withCredentials:!0}).then(e=>{this.message=e.data.msg,this.editEmail=0,this.editUsername=0,this.editPassword=0,this.user=e.data.user}).catch(e=>{this.error=e.response.data.message})},updateEmail(){this.editEmail=1},updateUsername(){this.editUsername=1},updatePassword(){this.editPassword=1}}},he=pe,ve=(s("a2d5"),Object(f["a"])(he,le,de,!1,null,null,null)),ge=ve.exports,fe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"editableData"},[e.isAuthenticated?s("div",{staticClass:"editables"},[e.error?s("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),e.auctions.length?s("h2",[e._v("OTO AUKCJE, KTÓRE MOŻESZ EDYTOWAĆ")]):s("h2",[e._v("NIE MASZ AUKCJI, KTÓRE MOŻESZ EDYTOWAĆ")]),e._l(e.auctions,(function(e,t){return s("auction",{key:e._id,attrs:{auction:e,index:t}})}))],2):s("h2",{staticClass:"title"},[e._v("Z A L O G U J "),s("br"),e._v(" S I Ę")])])},be=[];const _e="api/editAuctions";var Ce={name:"editableAuctions",data(){return{isAuthenticated:null,user:null,error:null,message:null,auctions:[]}},components:{Auction:ee},created(){m.a.get(_e,{withCredentials:!0}).then(e=>{this.isAuthenticated=e.data.isAuthenticated,this.user=e.data.user,this.auctions=e.data.auctions}).catch(e=>{this.error=e.response.data.message})}},we=Ce,Ae=(s("0f05"),Object(f["a"])(we,fe,be,!1,null,null,null)),ke=Ae.exports,ye=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"aContainer"},[i("div",{staticClass:"auction"},[e.error?i("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),e.user&&e.user.username===e.username?e.user&&e.user.username===e.username?i("div",{staticClass:"user"},[i("h2",{staticClass:"username"},[e._v("TWOJA AUKCJA")])]):e._e():i("div",{staticClass:"user"},[i("h2",{staticClass:"username"},[e._v("SPRZEDAWCA "+e._s(e.username))]),i("img",{attrs:{src:s("278c")},on:{click:e.sendMessage}})]),e.auction?i("div",[e.editable?e._e():i("AuctionContent",{attrs:{auction:e.auction}}),e.isAuthenticated&&new Date(e.auction.beginTime)<new Date&&!e.auction.soldTo?i("div",{staticClass:"buyingSection"},[e.auction.isAuctionable||e.user.username===e.username?e.auction.isAuctionable?i("div",{staticClass:"socketAuction"},[e.offers?i("OfferChat",{attrs:{offers:e.offers,minPrice:e.auction.price+".01",isOwner:e.user.username===e.username},on:{sendNewOffer:e.sendOffer}}):e._e()],1):e._e():i("button",{staticClass:"buyNow",on:{click:e.buy}},[e._v("KUP TERAZ")])]):e.isAuthenticated?e.user.username!==e.username&&new Date(e.auction.beginTime)>new Date?i("h1",[e._v("AUKCJA JESZCZE SIĘ NIE ROZPOCZĘŁA")]):e.user.username===e.username&&new Date(e.auction.beginTime)>new Date?i("button",{on:{click:e.edit}},[e._v("EDYTUJ")]):e._e():i("h1",[e._v("ZALOGUJ SIĘ ABY"),i("br"),e._v("UCZESTNICZYĆ W AUKCJI")]),e.auction.soldTo?i("h1",[e._v("SPRZEDANE")]):e._e(),e.editable?i("EditAuctionForm",{attrs:{auction:e.auction}}):e._e()],1):i("h1",[e._v("NIE MA TAKIEJ AUKCJI")])])])},Oe=[],Ne=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"editData"},[i("div",{staticClass:"editForm"},[e.error?i("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),i("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.edit(t)}}},[i("div",{staticClass:"itemName"},[i("label",{attrs:{for:"itemName"}},[e._v("Nazwa przedmiotu")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.itemName,expression:"itemName"}],staticClass:"form-input",attrs:{type:"text",name:"itemName",id:"itemName"},domProps:{value:e.itemName},on:{input:function(t){t.target.composing||(e.itemName=t.target.value)}}})]),i("div",{staticClass:"description"},[i("label",{attrs:{for:"description"}},[e._v("Opis")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"form-input",attrs:{type:"text",name:"description",id:"description"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})]),i("div",{staticClass:"price"},[i("label",{attrs:{for:"price"}},[e._v("Cena")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"price"}],staticClass:"form-input",attrs:{type:"number",min:"0",step:"0.01",name:"price",id:"price"},domProps:{value:e.price},on:{input:function(t){t.target.composing||(e.price=t.target.value)}}})]),i("div",{staticClass:"auctionable"},[i("label",{attrs:{for:"auctionable"}},[e._v("Licytacja?")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.auctionable,expression:"auctionable"}],staticClass:"form-input",attrs:{type:"checkbox",name:"auctionable",id:"auctionable"},domProps:{checked:Array.isArray(e.auctionable)?e._i(e.auctionable,null)>-1:e.auctionable},on:{change:function(t){var s=e.auctionable,i=t.target,a=!!i.checked;if(Array.isArray(s)){var n=null,r=e._i(s,n);i.checked?r<0&&(e.auctionable=s.concat([n])):r>-1&&(e.auctionable=s.slice(0,r).concat(s.slice(r+1)))}else e.auctionable=a}}})]),i("div",{staticClass:"beginDate"},[i("label",{attrs:{for:"begin"}},[e._v("Data i czas rozpoczęcia:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.begin,expression:"begin"}],staticClass:"form-input",attrs:{type:"date",name:"begin",id:"begin",min:e.today},domProps:{value:e.begin},on:{input:function(t){t.target.composing||(e.begin=t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.beginTime,expression:"beginTime"}],staticClass:"form-input",attrs:{type:"time",name:"beginTime",id:"beginTime"},domProps:{value:e.beginTime},on:{input:function(t){t.target.composing||(e.beginTime=t.target.value)}}})]),i("div",{staticClass:"endDate"},[i("label",{attrs:{for:"end"}},[e._v("Data i czas zakończenia:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.end,expression:"end"}],staticClass:"form-input",attrs:{type:"date",name:"end",id:"end",min:e.begin},domProps:{value:e.end},on:{input:function(t){t.target.composing||(e.end=t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.endTime,expression:"endTime"}],staticClass:"form-input",attrs:{type:"time",name:"endTime",id:"endTime"},domProps:{value:e.endTime},on:{input:function(t){t.target.composing||(e.endTime=t.target.value)}}})]),i("div",{staticClass:"pictures",attrs:{id:"radio"}},[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.picture,expression:"picture"}],attrs:{type:"radio",id:"devices",name:"picture",value:"devices.png"},domProps:{checked:e._q(e.picture,"devices.png")},on:{change:function(t){e.picture="devices.png"}}}),i("img",{attrs:{src:s("2699")}})]),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.picture,expression:"picture"}],attrs:{type:"radio",id:"agd",name:"picture",value:"agd.png"},domProps:{checked:e._q(e.picture,"agd.png")},on:{change:function(t){e.picture="agd.png"}}}),i("img",{attrs:{src:s("47d8")}})]),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.picture,expression:"picture"}],attrs:{type:"radio",id:"clothes",name:"picture",value:"clothes.png"},domProps:{checked:e._q(e.picture,"clothes.png")},on:{change:function(t){e.picture="clothes.png"}}}),i("img",{attrs:{src:s("b10b")}})]),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.picture,expression:"picture"}],attrs:{type:"radio",id:"furniture",name:"picture",value:"furniture.png"},domProps:{checked:e._q(e.picture,"furniture.png")},on:{change:function(t){e.picture="furniture.png"}}}),i("img",{attrs:{src:s("6b67")}})]),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.picture,expression:"picture"}],attrs:{type:"radio",id:"garden",name:"picture",value:"garden.png"},domProps:{checked:e._q(e.picture,"garden.png")},on:{change:function(t){e.picture="garden.png"}}}),i("img",{attrs:{src:s("c742")}})])]),e._m(0)])])])},Ee=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"submit"},[s("button",{attrs:{type:"submit"}},[e._v("ZATWIERDŹ")])])}];const Te="api/auctions";var xe={name:"editAuction",props:["auction"],data(){return{error:null,message:null,today:"",itemName:this.auction.itemName,description:this.auction.description,price:this.auction.price,auctionable:this.auction.isAuctionable,begin:"",beginTime:"",end:"",endTime:"",picture:this.auction.picture}},created(){m.a.get(Te,{withCredentials:!0}).then(e=>{this.begin=this.auction.beginTime.substring(0,10),this.end=this.auction.endTime.substring(0,10);let t=new Date;this.today=t.toISOString().substring(0,10);let s=new Date(this.auction.beginTime).getMinutes(),i=new Date(this.auction.endTime).getMinutes(),a=new Date(this.auction.beginTime).getHours(),n=new Date(this.auction.endTime).getHours();s<10&&(s="0"+s),i<10&&(i="0"+i),a<10&&(a="0"+a),n<10&&(n="0"+n),this.beginTime=a+":"+s,this.endTime=n+":"+i}).catch(e=>{this.error=e})},methods:{edit(){this.begin===this.end&&this.beginTime>this.endTime?this.error="Data zakończenia musi być większa niż rozpoczęcia":(this.auctionable||(this.auctionable=!1),m.a.patch(Te,{itemName:this.itemName,description:this.description,price:this.price,auctionable:this.auctionable,begin:this.begin,beginTime:this.beginTime,end:this.end,endTime:this.endTime,picture:this.picture,auctionId:this.auction._id,oldBegin:this.auction.beginTime},{withCredentials:!0}).then(e=>{this.message=e.data.msg}).catch(e=>{this.error=e.response.data.message}))}}},De=xe,Pe=(s("58ce"),Object(f["a"])(De,Ne,Ee,!1,null,null,null)),Ie=Pe.exports,Me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"offerWindow"},[s("div",{staticClass:"offers"},e._l(e.offers,(function(t){return s("div",{key:t.index,staticClass:"offer"},[s("div",{staticClass:"username"},[e._v("zaoferowano: ")]),s("div",{staticClass:"offerValue"},[e._v(" "+e._s(t.newPrice)+" zł")])])})),0),e.isOwner?e._e():s("form",{staticClass:"offerContainer",on:{submit:function(t){return t.preventDefault(),e.sendOffer(t)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"number",step:"0.01",min:e.minPrice},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),s("button",{attrs:{disabled:!e.value}},[e._v("LICYTUJ")])])])},Ue=[],Je={name:"offerChat",props:["offers","minPrice","isOwner"],data(){return{value:"",localOffers:[]}},methods:{sendOffer(){return this.value?(this.$emit("sendNewOffer",this.value),void(this.value="")):void alert("oferta nie może być pusta")}}},$e=Je,Ze=(s("1612"),Object(f["a"])($e,Me,Ue,!1,null,null,null)),Se=Ze.exports;const je=window.location.host+"/api/auction/",ze="/api/auction/",Ke="/api/conversation";var Re={data:function(){return{isAuthenticated:null,user:null,auction:null,username:null,error:null,socket:null,offers:[],users:[],editable:0}},components:{AuctionContent:ee,OfferChat:Se,EditAuctionForm:Ie},methods:{buy(){m.a.patch(ze+this.$route.params.id,{buy:!0},{withCredentials:!0}).then(e=>{this.$router.push("/history")}).catch(e=>{this.error=e.response.data.message})},joinAuction(){this.socket.emit("joinAuction",this.$route.params.id,this.user.id)},fetchMessages(){this.socket.on("fetchOffers",e=>{this.offers=e.offers.reverse()})},sendOffer(e){this.socket.emit("sendOffer",this.$route.params.id,e,this.user.id)},sendMessage(){m.a.get(Ke,{withCredentials:!0,params:{toUser:this.username}}).then(e=>{if(e.data.conversation)this.$router.push("/chat");else{let e=prompt("Jaką wiadomość chcesz wysłać?");m.a.post(Ke,{message:e,toUser:this.username},{withCredentials:!0}).then(e=>{this.$router.push("/chat")}).catch(e=>{this.error=e.response.data.message})}}).catch(e=>{this.error=e.response.data.message})},edit(){this.editable=!this.editable}},created(){m.a.get(ze+this.$route.params.id,{withCredentials:!0}).then(e=>{this.auction=e.data.auction,this.username=e.data.username,this.isAuthenticated=e.data.isAuthenticated,this.user=e.data.user}).then(()=>{this.isAuthenticated&&this.auction.isAuctionable&&(this.socket=l()(je),this.joinAuction())}).then(()=>{this.isAuthenticated&&this.auction.isAuctionable&&(this.fetchMessages(),this.socket.on("offer",e=>{console.log("newoffer"),this.offers.unshift(e.fullOffer),this.auction.price=e.fullOffer.newPrice}),this.socket.on("myerror",e=>{this.error=e}))}).catch(e=>{this.error=e.response.data.message})},beforeDestroy(){this.socket&&this.socket.disconnect()}},We=Re,Ye=(s("36e5"),Object(f["a"])(We,ye,Oe,!1,null,null,null)),Le=Ye.exports,Fe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"auctionData"},[e.isAuthenticated?i("div",{staticClass:"auctionForm"},[i("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.addNew(t)}}},[i("h2",{staticClass:"title"},[e._v("DODAJ NOWĄ AUKCJĘ")]),e.error?i("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),i("div",{staticClass:"formDiv"},[i("label",{attrs:{for:"itemName"}},[e._v("Nazwa przedmiotu")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.itemName,expression:"itemName"}],staticClass:"form-input",attrs:{type:"text",name:"itemName",id:"itemName"},domProps:{value:e.itemName},on:{input:function(t){t.target.composing||(e.itemName=t.target.value)}}})]),i("div",{staticClass:"formDiv"},[i("label",{attrs:{for:"description"}},[e._v("Opis")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"form-input",attrs:{type:"text",name:"description",id:"description"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})]),i("div",{staticClass:"formDiv"},[i("label",{attrs:{for:"price"}},[e._v("Cena")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"price"}],staticClass:"form-input",attrs:{type:"number",min:"0",step:"0.01",name:"price",id:"price"},domProps:{value:e.price},on:{input:function(t){t.target.composing||(e.price=t.target.value)}}})]),i("div",{staticClass:"formDiv"},[i("label",{attrs:{for:"auctionable"}},[e._v("Licytacja?")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.auctionable,expression:"auctionable"}],staticClass:"form-input",attrs:{type:"checkbox",name:"auctionable",id:"auctionable"},domProps:{checked:Array.isArray(e.auctionable)?e._i(e.auctionable,null)>-1:e.auctionable},on:{change:function(t){var s=e.auctionable,i=t.target,a=!!i.checked;if(Array.isArray(s)){var n=null,r=e._i(s,n);i.checked?r<0&&(e.auctionable=s.concat([n])):r>-1&&(e.auctionable=s.slice(0,r).concat(s.slice(r+1)))}else e.auctionable=a}}})]),i("div",{staticClass:"formDiv"},[i("label",{attrs:{for:"begin"}},[e._v("Data i czas rozpoczęcia:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.begin,expression:"begin"}],staticClass:"form-input",attrs:{type:"date",name:"begin",id:"begin",min:e.today},domProps:{value:e.begin},on:{input:function(t){t.target.composing||(e.begin=t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.beginTime,expression:"beginTime"}],staticClass:"form-input",attrs:{type:"time",name:"beginTime",id:"beginTime"},domProps:{value:e.beginTime},on:{input:function(t){t.target.composing||(e.beginTime=t.target.value)}}})]),i("div",{staticClass:"formDiv"},[i("label",{attrs:{for:"end"}},[e._v("Data i czas zakończenia:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.end,expression:"end"}],staticClass:"form-input",attrs:{type:"date",name:"end",id:"end",min:e.begin},domProps:{value:e.end},on:{input:function(t){t.target.composing||(e.end=t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.endTime,expression:"endTime"}],staticClass:"form-input",attrs:{type:"time",name:"endTime",id:"endTime"},domProps:{value:e.endTime},on:{input:function(t){t.target.composing||(e.endTime=t.target.value)}}})]),i("div",{staticClass:"formDiv",attrs:{id:"radio"}},[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.picture,expression:"picture"}],attrs:{type:"radio",id:"devices",name:"picture",value:"devices.png"},domProps:{checked:e._q(e.picture,"devices.png")},on:{change:function(t){e.picture="devices.png"}}}),i("img",{attrs:{src:s("2699")}})]),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.picture,expression:"picture"}],attrs:{type:"radio",id:"agd",name:"picture",value:"agd.png"},domProps:{checked:e._q(e.picture,"agd.png")},on:{change:function(t){e.picture="agd.png"}}}),i("img",{attrs:{src:s("47d8")}})]),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.picture,expression:"picture"}],attrs:{type:"radio",id:"clothes",name:"picture",value:"clothes.png"},domProps:{checked:e._q(e.picture,"clothes.png")},on:{change:function(t){e.picture="clothes.png"}}}),i("img",{attrs:{src:s("b10b")}})]),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.picture,expression:"picture"}],attrs:{type:"radio",id:"furniture",name:"picture",value:"furniture.png"},domProps:{checked:e._q(e.picture,"furniture.png")},on:{change:function(t){e.picture="furniture.png"}}}),i("img",{attrs:{src:s("6b67")}})]),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.picture,expression:"picture"}],attrs:{type:"radio",id:"garden",name:"picture",value:"garden.png"},domProps:{checked:e._q(e.picture,"garden.png")},on:{change:function(t){e.picture="garden.png"}}}),i("img",{attrs:{src:s("c742")}})])]),e._m(0)])]):i("h2",{staticClass:"title"},[e._v(" Z A L O G U J "),i("br"),e._v(" S I Ę")])])},He=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"formDiv"},[s("button",{attrs:{type:"submit"}},[e._v("ZATWIERDŹ")])])}];const Be="/api/auctions",Ge="api";var qe={name:"addAuction",data(){return{isAuthenticated:null,user:null,error:null,message:null,today:"",itemName:"",description:"",price:"",auctionable:"",begin:"",beginTime:"",end:"",endTime:"",picture:""}},created(){m.a.get(Ge,{withCredentials:!0}).then(e=>{this.isAuthenticated=e.data.isAuthenticated,this.user=e.data.user,this.today=new Date,this.begin=this.today.toISOString().substring(0,10);let t=this.today.getMinutes(),s=this.today.getHours();t<10&&(t="0"+t),s<10&&(s="0"+s),this.beginTime=s+":"+t,this.today=this.begin}).catch(e=>{this.error=e.response.data.message})},methods:{addNew(){this.begin===this.end&&this.beginTime>this.endTime?this.error="Data zakończenia musi być większa niż rozpoczęcia":(this.auctionable||(this.auctionable=!1),m.a.post(Be,{itemName:this.itemName,description:this.description,price:this.price,auctionable:this.auctionable,begin:this.begin,beginTime:this.beginTime,end:this.end,endTime:this.endTime,picture:this.picture},{withCredentials:!0}).then(e=>{this.$router.push("/history")}).catch(e=>{this.error=e.response.data.message}))}}},Ve=qe,Qe=(s("73ad"),Object(f["a"])(Ve,Fe,He,!1,null,null,null)),Xe=Qe.exports,et=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"historyData"},[e.isAuthenticated?s("div",{staticClass:"historical"},[s("div",{staticClass:"buttonPanel"},[s("button",{staticClass:"swiper",on:{click:e.showBought}},[e._v("AUKCJE WYGRANE/KUPIONE PRZEZ CIEBIE")]),s("button",{staticClass:"swiper",on:{click:e.showYours}},[e._v("TWOJE AUKCJE")])]),e.bought?s("div",[s("Bought")],1):e._e(),e.yours?s("div",[s("div",{staticClass:"buttonPanel"},[s("button",{staticClass:"swiper",on:{click:e.showHistorical}},[e._v("ZAKOŃCZONE AUKCJE")]),s("button",{staticClass:"swiper",on:{click:e.showCurrent}},[e._v("TRWAJĄCE AUKCJE")])]),e.historical?s("div",[s("Yours")],1):e._e(),e.current?s("div",[s("Current")],1):e._e()]):e._e()]):s("h2",{staticClass:"title"},[e._v("Z A L O G U J "),s("br"),e._v(" S I Ę")])])},tt=[],st=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"boughtAuctions"},[e.auctions.length?i("h1",[e._v("KUPIONE AUKCJE")]):i("h1",[e._v("BRAK KUPIONYCH AUKCJI")]),e.error?i("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),e._l(e.auctions,(function(t,a){return i("div",{key:t._id,staticClass:"boughtAuctionsFor",attrs:{auction:t,index:a}},[i("div",{staticClass:"boughtAuction"},[i("p",{staticClass:"name"},[e._v(" "+e._s(t.itemName))]),i("div",{staticClass:"picture"},[i("img",{attrs:{src:s("6b70")("./"+t.picture),alt:t.picture}})]),i("p",{staticClass:"description"},[e._v(e._s(t.description))]),t.isAuctionable?i("p",{staticClass:"price"},[e._v("PRZEDMIOT WYLICYTOWANY ZA "+e._s(t.price)+" zł")]):i("p",{staticClass:"price"},[e._v("PRZEDMIOT KUPIONY ZA "+e._s(t.price)+" zł")])])])}))],2)},it=[];const at="/api/auctions/bought";var nt={name:"AuctionsComponent",data(){return{auctions:[],error:""}},created(){m.a.get(at,{withCredentials:!0}).then(e=>{this.auctions=e.data.auctions}).catch(e=>{this.error=e.response.data.message})}},rt=nt,ot=(s("b204"),Object(f["a"])(rt,st,it,!1,null,"2341050e",null)),ct=ot.exports,ut=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"boughtAuctions"},[e.auctions.length?i("h1",[e._v("TWOJE AUKCJE")]):i("h1",[e._v("BRAK WYSTAWIONYCH AUKCJI")]),e.error?i("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),e._l(e.auctions,(function(t,a){return i("div",{key:t._id,staticClass:"boughtAuctionsFor",attrs:{auction:t,index:a}},[i("div",{staticClass:"boughtAuction"},[i("p",{staticClass:"name"},[e._v(" "+e._s(t.itemName))]),i("div",{staticClass:"picture"},[i("img",{attrs:{src:s("6b70")("./"+t.picture),alt:t.picture}})]),i("p",{staticClass:"description"},[e._v(e._s(t.description))]),t.isAuctionable?i("p",{staticClass:"price"},[e._v("PRZEDMIOT WYLICYTOWANY ZA "+e._s(t.price)+" zł")]):i("p",{staticClass:"price"},[e._v("PRZEDMIOT KUPIONY ZA "+e._s(t.price)+" zł")])])])}))],2)},lt=[];const dt="/api/auctions/yours";var mt={name:"AuctionsComponent",data(){return{auctions:[],error:""}},created(){m.a.get(dt,{withCredentials:!0}).then(e=>{this.auctions=e.data.auctions}).catch(e=>{this.error=e.response.data.message})}},pt=mt,ht=(s("ba1c"),Object(f["a"])(pt,ut,lt,!1,null,"4f81f2ea",null)),vt=ht.exports,gt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"boughtAuctions"},[e.auctions.length?i("h1",[e._v("TWOJE TRWAJĄCE AUKCJE")]):i("h1",[e._v("BRAK TRWAJĄCYCH AUKCJI")]),e.error?i("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),e._l(e.auctions,(function(t,a){return i("div",{key:t._id,staticClass:"boughtAuctionsFor",attrs:{auction:t,index:a}},[i("router-link",{staticClass:"router",attrs:{to:{name:"auction",params:{id:t._id}}}},[i("div",{staticClass:"boughtAuction"},[i("p",{staticClass:"name"},[e._v(" "+e._s(t.itemName))]),i("div",{staticClass:"picture"},[i("img",{attrs:{src:s("6b70")("./"+t.picture),alt:t.picture}})]),i("p",{staticClass:"description"},[e._v(e._s(t.description))]),t.isAuctionable?i("p",{staticClass:"price"},[e._v("AKTUALNA CENA "+e._s(t.price)+" zł")]):i("p",{staticClass:"price"},[e._v("CENA "+e._s(t.price)+" zł")])])])],1)}))],2)},ft=[];const bt="/api/auctions/current";var _t={name:"AuctionsComponent",data(){return{auctions:[],error:""}},created(){m.a.get(bt,{withCredentials:!0}).then(e=>{this.auctions=e.data.auctions}).catch(e=>{this.error=e.response.data.message})}},Ct=_t,wt=(s("3aa7"),Object(f["a"])(Ct,gt,ft,!1,null,"636a206c",null)),At=wt.exports;const kt="api/historicalAuctions";var yt={name:"historicalAuctions",data(){return{isAuthenticated:null,user:null,error:null,yours:!1,bought:!0,historical:!1,current:!1}},components:{Bought:ct,Yours:vt,Current:At},created(){m.a.get(kt,{withCredentials:!0}).then(e=>{this.isAuthenticated=e.data.isAuthenticated,this.user=e.data.user}).catch(e=>{this.error=e.response.data.message})},methods:{showBought(){this.yours=!1,this.historical=!1,this.current=!1,this.bought=!0},showYours(){this.bought=!1,this.yours=!0},showHistorical(){this.current=!1,this.historical=!0},showCurrent(){this.historical=!1,this.current=!0}}},Ot=yt,Nt=(s("aa31"),Object(f["a"])(Ot,et,tt,!1,null,null,null)),Et=Nt.exports,Tt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"manager"},[e.isAuthenticated?s("div",{staticClass:"panel"},[e.error?s("p",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"error"},[e._v(e._s(e.error))]):e._e(),e.auctions.length?s("h2",[e._v("LICYTACJE, W KTÓRYCH UCZESTNICZYSZ")]):s("h2",[e._v("NIE MASZ LICYTACJI W KTÓRYCH BIERZESZ UDZIAŁ")]),s("div",{staticClass:"gridPanel"},e._l(e.auctions,(function(t,i){return s("div",{key:t._id,staticClass:"auctionables",attrs:{index:i}},[s("h3",[e._v(e._s(t.itemName))]),s("p",[e._v(e._s(t.description))]),s("h4",[e._v("aktualnie: "+e._s(t.price)+" zł")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.offer[i],expression:"offer[index]"}],attrs:{type:"number",min:t.price+".01"},domProps:{value:e.offer[i]},on:{input:function(t){t.target.composing||e.$set(e.offer,i,t.target.value)}}}),s("button",{on:{click:function(s){return e.sendOffer(t._id,i)}}},[e._v("ZAOFERUJ")])])})),0)]):s("h2",{staticClass:"title"},[e._v("Z A L O G U J "),s("br"),e._v(" S I Ę")])])},xt=[];const Dt="api/auctions/participating",Pt=window.location.host+"/api/auction/";var It={name:"historicalAuctions",data(){return{isAuthenticated:null,user:null,error:null,message:null,auctions:[],offer:[],socket:null,visible:!1}},created(){m.a.get(Dt,{withCredentials:!0}).then(e=>{this.isAuthenticated=e.data.isAuthenticated,this.user=e.data.user,this.auctions=e.data.auctions}).then(()=>{if(this.isAuthenticated&&this.auctions.length){console.log(Pt),this.socket=l()(Pt);for(let e=0;e<this.auctions.length;e++)this.socket.emit("joinAuction",this.auctions[e]._id,this.user.id)}}).then(()=>{this.socket.on("offer",e=>{this.auctions[this.findAuctionIndex(e.auctionRoom)].price=e.fullOffer.newPrice}),this.socket.on("myerror",e=>{this.error=e,this.visible=!0})}).catch(e=>{this.error=e.response.data.message})},updated(){setTimeout(()=>this.visible=!1,4e3)},methods:{sendOffer(e,t){console.log(t),console.log(this.offer[t]),this.socket.emit("sendOffer",e,this.offer[t],this.user.id),this.offer[t]=""},findAuctionIndex(e){for(let t=0;t<this.auctions.length;t++)if(this.auctions[t]._id===e)return t}},beforeDestroy(){this.socket&&this.socket.disconnect()}},Mt=It,Ut=(s("5d71"),Object(f["a"])(Mt,Tt,xt,!1,null,null,null)),Jt=Ut.exports,$t=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[e.isAuthenticated?s("div",{staticClass:"main"},[s("conversations"),s("conversationActions")],1):s("h1",[e._v("Z A L O G U J "),s("br"),e._v(" S I Ę")])])},Zt=[],St=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.conversations?s("div",{staticClass:"conversation-list"},e._l(e.conversations,(function(e,t){return s("conversation",{key:t,attrs:{conversation:e}})})),1):e._e()},jt=[],zt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"list-item",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.selectConversation()}}},[e._v(" "+e._s(e.usernameTo)+" "),e.unread?s("div",{staticClass:"dot"}):e._e()])},Kt=[];const Rt="api/conversation/";var Wt={props:["conversation"],data(){return{usernameTo:null,userIdFrom:null,usernameFrom:null,unread:!1}},computed:{},methods:{selectConversation(){this.unread=!1,this.$root.$emit("conversationSelected",this.conversation,this.usernameTo,this.userIdFrom,this.usernameFrom)}},created(){m.a.get(Rt+this.conversation._id,{withCredentials:!0}).then(e=>{this.usernameTo=e.data.username,this.userIdFrom=e.data.user.id,this.usernameFrom=e.data.user.username,this.unread=e.data.unread}).catch(e=>{this.error=e.response.data.message})}},Yt=Wt,Lt=(s("bd6a"),Object(f["a"])(Yt,zt,Kt,!1,null,null,null)),Ft=Lt.exports;const Ht="api/conversations";var Bt={data:function(){return{conversations:null}},components:{Conversation:Ft},created(){m.a.get(Ht,{withCredentials:!0}).then(e=>{this.conversations=e.data.conversations}).catch(e=>{this.error=e.response.data.message})}},Gt=Bt,qt=(s("07c0"),Object(f["a"])(Gt,St,jt,!1,null,null,null)),Vt=qt.exports,Qt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chatWindow"},[e.conversation?s("div",[s("h2",[e._v("Chat z: "+e._s(e.username))]),e.messages?s("div",{staticClass:"messages"},e._l(e.messages,(function(t){return s("div",{key:t._id,staticClass:"message"},[t.userId===e.yourId?s("div",{staticClass:"yourMessage"},[s("div",{staticClass:"username"},[e._v("Ty:")]),s("div",{staticClass:"content"},[e._v(" "+e._s(t.content)+" ")]),s("div",{staticClass:"date"},[e._v(e._s(new Date(t.date).toUTCString().slice(0,-4)))])]):s("div",{staticClass:"elseMessage"},[s("div",{staticClass:"username"},[e._v(e._s(e.username)+":")]),s("div",{staticClass:"content"},[e._v(" "+e._s(t.content)+" ")]),s("div",{staticClass:"date"},[e._v(e._s(new Date(t.date).toUTCString().slice(0,-4)))])])])})),0):e._e(),s("form",{staticClass:"messageContainer",on:{submit:function(t){return t.preventDefault(),e.sendMessage(t)}}},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.msg,expression:"msg",modifiers:{lazy:!0}}],attrs:{type:"text"},domProps:{value:e.msg},on:{change:function(t){e.msg=t.target.value}}}),s("button",{attrs:{disabled:!e.msg}},[e._v("WYŚLIJ")])])]):s("h2",[e._v("Wybierz rozmowę")])])},Xt=[];const es=window.location.host+"/api/chat";var ts={data(){return{conversation:null,username:null,yourId:null,yourUsername:null,msg:null,messages:[],socket:null}},methods:{joinConversation(){this.socket.emit("joinChat",this.conversation._id,this.yourId,this.yourUsername),this.fetchMessages()},fetchMessages(){this.socket.on("fetchMessages",e=>{this.messages=e})},sendMessage(){this.msg?(this.socket.emit("sendMessage",this.conversation._id,this.msg,this.username,this.yourId),this.msg=""):alert("wiadomość nie może być pusta")}},created(){this.$root.$on("conversationSelected",(e,t,s,i)=>{null!==this.socket&&this.socket.emit("leaveRoom",this.conversation._id),this.conversation=e,this.username=t,this.yourId=s,this.yourUsername=i,this.$root.$emit("hide"),this.conversation.show=!0,this.socket=l()(es),this.joinConversation(),this.socket.on("message",e=>{this.messages.push(e)})})},updated(){document.querySelector(".messages").scrollTo(0,document.querySelector(".messages").scrollHeight-1)},beforeDestroy(){this.socket&&this.socket.emit("leaveRoom",this.conversation._id)}},ss=ts,is=(s("9bcb"),Object(f["a"])(ss,Qt,Xt,!1,null,null,null)),as=is.exports;const ns="api";var rs={name:"chat",components:{Conversations:Vt,ConversationActions:as},data(){return{isAuthenticated:null,user:null}},created(){m.a.get(ns,{withCredentials:!0}).then(e=>{this.isAuthenticated=e.data.isAuthenticated,this.user=e.data.user}).catch(e=>{this.error=e.response.data.message})}},os=rs,cs=(s("9495"),Object(f["a"])(os,$t,Zt,!1,null,null,null)),us=cs.exports,ls=s("e166"),ds=s.n(ls);i["a"].use(ds.a),i["a"].use(a["a"]),i["a"].config.productionTip=!1;const ms=[{path:"/login",component:Z},{path:"/register",component:Y},{path:"/",component:ue},{path:"/account",component:ge},{path:"/myAuctions",component:ke},{path:"/auction/:id",name:"auction",component:Le},{path:"/addAuction",component:Xe},{path:"/history",component:Et},{path:"/chat",component:us},{path:"/panel",component:Jt}],ps=new a["a"]({routes:ms,mode:"history"});new i["a"]({router:ps,render:function(e){return e(D)}}).$mount("#app")},a2d5:function(e,t,s){"use strict";var i=s("b639"),a=s.n(i);a.a},a7f6:function(e,t,s){},aa31:function(e,t,s){"use strict";var i=s("cad9"),a=s.n(i);a.a},b10b:function(e,t,s){e.exports=s.p+"img/clothes.7a70b2de.png"},b204:function(e,t,s){"use strict";var i=s("4aa8"),a=s.n(i);a.a},b260:function(e,t,s){"use strict";var i=s("0957"),a=s.n(i);a.a},b4a7:function(e,t,s){e.exports=s.p+"img/newBg.500ce833.png"},b639:function(e,t,s){},ba1c:function(e,t,s){"use strict";var i=s("3de9"),a=s.n(i);a.a},bb18:function(e,t,s){"use strict";var i=s("6b99"),a=s.n(i);a.a},bd6a:function(e,t,s){"use strict";var i=s("33f0"),a=s.n(i);a.a},bef8:function(e,t,s){},bff4:function(e,t,s){},c1bc:function(e,t,s){e.exports=s.p+"img/logo.82b9c7a5.png"},c742:function(e,t,s){e.exports=s.p+"img/garden.baf04bc3.png"},cad9:function(e,t,s){},cd8e:function(e,t,s){e.exports=s.p+"img/logoNewer.44b7ba2b.png"},cf6f:function(e,t,s){e.exports=s.p+"img/envelopeFull.bbcca194.png"},d195:function(e,t,s){e.exports=s.p+"img/makeup.03c78412.png"},d60c:function(e,t,s){},df78:function(e,t,s){},e403:function(e,t,s){"use strict";var i=s("6e77"),a=s.n(i);a.a},e559:function(e,t,s){},e638:function(e,t,s){e.exports=s.p+"img/logoNew2.129e5d5e.png"},e7aa:function(e,t,s){},eb89:function(e,t,s){e.exports=s.p+"img/logoNew.2875b461.png"},ebc7:function(e,t,s){}});
//# sourceMappingURL=app.3cdcc147.js.map